{
  "meta": {
    "project": "kolektrash",
    "date": "2025-11-19",
    "prepared_by": "Generated by ChatGPT"
  },
  "product_overview": "KOLEKTRASH is a role-based waste collection management system designed to streamline municipal solid waste collection through role-based workflows. It facilitates daily route scheduling, task assignment, real-time route tracking, notifications, and active citizen engagement including issue reporting and feedback.",
  "core_goals": [
    "Implement role-based authentication and authorization to ensure secure access for Admins, Truck Drivers, Garbage Collectors, Barangay Heads, Residents, and Foremen.",
    "Enable daily route scheduling and automatic route generation to optimize waste collection logistics.",
    "Provide task assignment capabilities for drivers and collectors with real-time status updates.",
    "Support real-time route tracking with integrated map visualization for efficient route management.",
    "Manage special pickup requests with approval workflows and monitor barangay activities and issues.",
    "Facilitate issue reporting, tracking, and resolution to improve service quality.",
    "Maintain an effective feedback system for residents and stakeholders.",
    "Send timely notifications for task updates, schedule changes, and important alerts.",
    "Monitor attendance of personnel such as foremen and truck drivers.",
    "Distribute Information, Education, and Communication (IEC) materials to engage and inform the community.",
    "Allow users to view collection schedules and manage their profiles."
  ],
  "key_features": [
    "Role-based user authentication and authorization.",
    "Admin dashboard for user, route, schedule, task, and pickup request management.",
    "Daily route scheduling and generation with map visualization using Leaflet.",
    "Task assignments with real-time updates and notifications for drivers and collectors.",
    "Special pickup request submission, approval, and tracking.",
    "Issue reporting and tracking system accessible by various roles.",
    "Resident and barangay head portals for viewing schedules, reporting issues, and accessing IEC materials.",
    "Notification system integrated for alerts and updates across roles.",
    "Attendance monitoring and management for foremen and related personnel.",
    "Feedback submission and monitoring for continuous service improvement.",
    "Multi-role dashboards tailored to specific functions and access levels.",
    "Settings and profile management across all user roles."
  ],
  "user_flow_summary": [
    "User logs in with role-based credentials and is routed to their specific dashboard.",
    "Admins manage users, routes, schedules, task assignments, and oversee barangay activities via their dashboard.",
    "Truck drivers and garbage collectors view assigned routes and schedules, update task status, and track routes live on maps.",
    "Barangay heads submit special pickup requests, view collection reports, report issues, and access IEC materials.",
    "Residents view collection schedules, report issues, provide feedback, and view IEC materials.",
    "Foremen monitor attendance, manage schedules, assign tasks, and handle truck and special pickup management.",
    "Users receive notifications related to their roles for updates on tasks, schedules, issues, and feedback."
  ],
  "validation_criteria": [
    "Authentication flows (login, signup, password reset) must secure user access correctly and protect role-based routes.",
    "Dashboard interfaces load correctly with data shown according to user role.",
    "Routes and schedules can be created, viewed, updated, and deleted as per role permissions.",
    "Task assignments reflect correctly in user dashboards and real-time updates propagate to notifications.",
    "Special pickup requests can be submitted, approved, tracked, and status changes notified.",
    "Issues reported by barangay heads and residents are persistently stored and their status is updated correctly.",
    "Feedback submissions are stored and accessible to admins for review.",
    "Notifications trigger timely and accurate alerts to relevant users.",
    "Map visualizations render and update routes and task progress in real-time.",
    "Attendance records for foremen and drivers are accurately recorded and retrievable.",
    "IEC materials are accessible and downloadable by residents and barangay heads.",
    "Role-based authorization prevents unauthorized access to restricted routes and functionalities."
  ],
  "code_summary": {
    "project_name": "kolektrash",
    "description": "A role-based waste collection management system for municipal solid waste collection through role-based workflows, daily route scheduling, task assignment, notifications, and citizen engagement",
    "tech_stack": {
      "frontend": {
        "framework": "React 19.1.0",
        "build_tool": "Vite 6.3.5",
        "styling": "Tailwind CSS 3.4.17",
        "routing": "react-router-dom 7.6.2",
        "ui_libraries": [
          "@mui/material 7.1.1",
          "@heroicons/react 2.2.0",
          "react-icons 5.5.0"
        ],
        "maps": "react-leaflet 5.0.0, leaflet 1.9.4",
        "charts": "chart.js 4.4.9, react-chartjs-2 5.3.0",
        "http_client": "axios 1.10.0",
        "notifications": "react-toastify 11.0.5",
        "animations": "lottie-react 2.4.1"
      },
      "backend": {
        "language": "PHP 7.4+",
        "database": "MySQL/MariaDB",
        "database_access": "PDO with prepared statements",
        "email": "PHPMailer"
      },
      "development": {
        "package_manager": "npm",
        "node_version": "18+",
        "server": "XAMPP (Apache + MySQL)"
      }
    },
    "architecture": {
      "type": "SPA (Single Page Application)",
      "frontend_location": "src/",
      "backend_location": "backend/",
      "api_endpoints": "backend/api/",
      "build_output": "dist/",
      "deployment": "Static build + PHP API hosted together"
    },
    "user_roles": [
      {
        "role": "admin",
        "features": [
          "Dashboard with system overview",
          "User management (create, update, delete users)",
          "Route management",
          "Schedule management",
          "Task assignment and management",
          "Special pickup request approval",
          "Barangay activity monitoring",
          "Issue tracking",
          "Feedback management"
        ]
      },
      {
        "role": "truck_driver",
        "features": [
          "Dashboard",
          "View assigned routes",
          "View collection schedule",
          "Route run with live map tracking",
          "Task management",
          "Vehicle information",
          "Notifications",
          "Settings"
        ]
      },
      {
        "role": "garbage_collector",
        "features": [
          "Dashboard",
          "View assigned tasks",
          "View collection schedule",
          "Route run with map",
          "View assigned routes",
          "Notifications",
          "Settings"
        ]
      },
      {
        "role": "barangay_head",
        "features": [
          "Dashboard",
          "Submit special pickup requests",
          "View collection schedule",
          "Report issues",
          "View issue status",
          "Collection reports",
          "Appointments",
          "IEC materials",
          "Feedback",
          "Notifications",
          "Settings"
        ]
      },
      {
        "role": "resident",
        "features": [
          "Dashboard",
          "View collection schedule",
          "Report issues",
          "View issue status",
          "IEC materials",
          "Feedback",
          "Notifications",
          "Settings"
        ]
      },
      {
        "role": "foreman",
        "features": [
          "Dashboard",
          "Attendance monitoring",
          "Schedule management",
          "Task management",
          "Truck management",
          "Special pickup management",
          "Issue management",
          "Settings"
        ]
      }
    ],
    "core_features": [
      "Role-based authentication and authorization",
      "Daily route scheduling and generation",
      "Task assignment to drivers and collectors",
      "Real-time route tracking with map visualization",
      "Special pickup request management",
      "Issue reporting and tracking",
      "Feedback system",
      "Notification system",
      "Attendance monitoring (foreman)",
      "Barangay activity monitoring",
      "IEC (Information, Education, Communication) materials",
      "Collection schedule viewing",
      "User profile management"
    ],
    "key_components": {
      "auth": [
        "Login",
        "SignUp",
        "ForgotPassword",
        "RequireAuth (route protection)"
      ],
      "admin": [
        "Dashboard",
        "ManageUsers",
        "ManageRoute",
        "ManageSchedule",
        "PickupSimple",
        "BarangayActivity",
        "TaskManagement",
        "Issues",
        "Feedback"
      ],
      "truck_driver": [
        "TruckDriverDashboard",
        "TruckDriverHome",
        "TruckDriverRoutes",
        "RouteRun",
        "TruckDriverTask",
        "TruckDriverCollectionSchedule",
        "TruckDriverVehicle",
        "TruckDriverNotifications",
        "TruckDriverSettings"
      ],
      "garbage_collector": [
        "GarbageCollectorDashboard",
        "GarbageCollectorHome",
        "GarbageCollectorRoutes",
        "CollectorRouteRun",
        "GarbageCollectorTasks",
        "GarbageCollectorSchedule",
        "GarbageCollectorNotifications",
        "GarbageCollectorSettings"
      ],
      "barangay_head": [
        "BarangayHeadDashboard",
        "Home",
        "PickupRequest",
        "CollectionSchedule",
        "CollectionReports",
        "ReportIssue",
        "BarangayHeadIssueStatus",
        "Appointments",
        "IEC",
        "Feedback",
        "BarangayHeadNotifications",
        "BarangayHeadSettings"
      ],
      "resident": [
        "ResidentDashboard",
        "ResidentHome",
        "ResidentSchedule",
        "ResidentReport",
        "ResidentIssueStatus",
        "ResidentIEC",
        "Feedback",
        "ResidentNotifications",
        "ResidentSettings"
      ],
      "foreman": [
        "ForemanDashboard",
        "ForemanHome",
        "ForemanAttendance",
        "ForemanSchedule",
        "ForemanTasks",
        "ForemanTrucks",
        "ForemanSpecialPickup",
        "ForemanIssues",
        "ForemanSettings"
      ]
    },
    "api_structure": {
      "base_url": "http://localhost/kolektrash/backend/api (local) or https://koletrash.systemproj.com/backend/api (production)",
      "endpoints_categories": [
        "Authentication (signup, login, forgot password, verification)",
        "User management (get_all_users, update_user_status, register_personnel, register_resident)",
        "Routes (get_routes, get_scheduled_routes, generate routes)",
        "Schedules (get_predefined_schedules, create_missing_schedules, update_predefined_schedule)",
        "Tasks (assign_task, get_all_task_assignments, update_assignment, delete_assignment)",
        "Pickup requests (submit_pickup_request, get_pickup_requests, update_pickup_request_status)",
        "Barangays (get_barangays, update_barangays)",
        "Issues (get_issues, submit_issue_report)",
        "Feedback (get_feedback, submit_feedback)",
        "Notifications (get, delete)",
        "Attendance (record_attendance, get_attendance, search_personnel)"
      ]
    },
    "routing": {
      "landing_page": "/",
      "auth_routes": [
        "/login",
        "/signup",
        "/forgot-password"
      ],
      "admin_routes": [
        "/admin/dashboard",
        "/admin/users",
        "/admin/routes",
        "/admin/schedule",
        "/admin/pickup",
        "/admin/barangay",
        "/admin/feedback",
        "/admin/issues",
        "/admin/task-management"
      ],
      "resident_routes": [
        "/resident",
        "/resident/report",
        "/resident/issue-status",
        "/resident/schedule",
        "/resident/iec",
        "/resident/notifications",
        "/resident/feedback",
        "/resident/settings"
      ],
      "barangay_head_routes": [
        "/barangayhead",
        "/barangayhead/report",
        "/barangayhead/issue-status",
        "/barangayhead/pickup",
        "/barangayhead/schedule",
        "/barangayhead/collection-reports",
        "/barangayhead/appointments",
        "/barangayhead/iec",
        "/barangayhead/notifications",
        "/barangayhead/settings"
      ],
      "truck_driver_routes": [
        "/truckdriver",
        "/truckdriver/schedule",
        "/truckdriver/tasks",
        "/truckdriver/routes",
        "/truckdriver/route/:id",
        "/truckdriver/vehicle",
        "/truckdriver/notifications",
        "/truckdriver/settings"
      ],
      "garbage_collector_routes": [
        "/garbagecollector",
        "/garbagecollector/schedule",
        "/garbagecollector/tasks",
        "/garbagecollector/routes",
        "/garbagecollector/route/:id",
        "/garbagecollector/notifications",
        "/garbagecollector/settings"
      ],
      "foreman_routes": [
        "/foreman",
        "/foreman/attendance",
        "/foreman/schedule",
        "/foreman/tasks",
        "/foreman/trucks",
        "/foreman/special-pickup",
        "/foreman/issues",
        "/foreman/settings"
      ]
    },
    "development_server": {
      "port": 5173,
      "command": "npm run dev",
      "url": "http://localhost:5173"
    },
    "testing_scope": {
      "type": "frontend",
      "framework": "React + Vite",
      "needs_login": true,
      "test_areas": [
        "Authentication flows (login, signup, password reset)",
        "Role-based route protection",
        "Dashboard functionality per role",
        "User management (admin)",
        "Route and schedule management",
        "Task assignment and tracking",
        "Pickup request workflow",
        "Issue reporting",
        "Feedback submission",
        "Notification system",
        "Map integration and route visualization",
        "Settings and profile management"
      ]
    }
  }
}
